host: PI_IP=apaw.local; sleep 3; sox -V1 --type coreaudio "BlackHole 16ch" --type raw --rate 44100 --encoding signed-integer --bits 24 --channels 2 - remix 1 2 | nc $PI_IP 2150 | sox -V1 --type raw --rate 44100 --encoding signed-integer --bits 24 --channels 2 - --type coreaudio "BlackHole 2ch"
pi: ssh -S none root@pi 'killall -v -s SIGKILL nc arecord aplay; nice -n -20 arecord --verbose --disable-resample --disable-channels --disable-format --disable-softvol --mmap --nonblock --rate 44100 --format S24_3LE --channels 2 --file-type raw --device hw:CARD=UAC2Gadget,DEV=0 --buffer-time 75000 - | nice -n -20 nc -l 2150 -k | nice -n -20 aplay --verbose --disable-resample --disable-channels --disable-format --disable-softvol --mmap --nonblock --rate 44100 --format S24_3LE --channels 2 --file-type raw --device hw:CARD=UAC2Gadget,DEV=0 --buffer-time 75000 -'

# an attempt of monitoring via HDMI output
# fixme: still too much latency...
#pi: ssh -S none root@pi 'killall -v -s SIGKILL nc arecord aplay; nice -n -20 arecord --verbose --disable-resample --disable-channels --disable-format --disable-softvol --mmap --nonblock --rate 44100 --format S24_3LE --channels 2 --file-type raw --device hw:CARD=UAC2Gadget,DEV=0 - | nice -n -20 stdbuf -i0 -o0 -e0 tee >(nice -n -19 nc -l 2150 -k | nice -n -19 aplay --verbose --disable-resample --disable-channels --disable-format --disable-softvol --mmap --nonblock --rate 44100 --format S24_3LE --channels 2 --file-type raw --device hw:CARD=UAC2Gadget,DEV=0 -) >(nice -n -20 stdbuf -i0 -o0 -e0 aplay --verbose --disable-resample --disable-channels --disable-softvol --mmap --nonblock --rate 44100 --format S24_3LE --channels 2 --file-type raw --device plughw:CARD=b1,DEV=0 --buffer-time 50000 -) > /dev/null'

# fixme: why sshd suddenly exits?
#ipad: trap 'ssh ipad "killall cat socat"' EXIT > /dev/null; ssh ipad ./pi-socat.sh